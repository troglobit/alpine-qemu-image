{
    "variables": {
	"password": "secret",
	"ssh_pubkey": ""
    },
    "builders":
    [
    {
	"type": "qemu",
	"iso_url": "https://dl-cdn.alpinelinux.org/alpine/v3.13/releases/x86_64/alpine-standard-3.13.1-x86_64.iso",
	"iso_checksum": "4dff2a8386a32d83b3ce34137fe991073617b3c920b2ed069e0e6e55fea96cff",
	"iso_checksum_type": "sha256",
	"output_directory": "alpine-kernel-dev",
	"shutdown_command": "poweroff",
	"disk_size": 5000,
	"format": "qcow2",
	"headless": false,
	"use_default_display": true,
	"accelerator": "kvm",
	"ssh_host_port_min": 2222,
	"ssh_host_port_max": 2229,
	"ssh_username": "root",
	"ssh_password": "{{user `password`}}",
	"ssh_port": 22,
	"ssh_wait_timeout": "300s",
	"vm_name": "alpine-kernel-dev",
	"net_device": "virtio-net",
	"disk_interface": "virtio",
	"boot_wait": "5s",
	"boot_command":
	[
            "root<enter>",
	    "passwd<enter>{{user `password`}}<enter>{{user `password`}}<enter>",
	    "apk add openssh<enter>",
	    "echo 'PermitRootLogin yes' >> /etc/ssh/sshd_config<enter>",
	    "ifconfig lo up<enter>",
	    "ifconfig eth0 up && udhcpc -i eth0<enter>",
	    "/etc/init.d/sshd start<enter><wait>"
	]
    }
    ],
    "provisioners": [
	{
	    "type": "shell",
	    "script": "install.sh",
	    "environment_vars": [
		"ROOT_PASSWORD={{user `password`}}",
		"SSH_PUBKEY={{user `ssh_pubkey`}}"
	    ]
	}
    ]
}
